---
title: 函数基础02
date: 2018-08-30 19:00:08
comments: true
categories: Python
tags: 函数
---
### 一、匿名函数
匿名函数本质还是函数，之前函数的所有内容仍然适用。
##### 1、匿名函数的声明
函数名 = lambda  参数列表：返回值
##### 2、说明
**函数名**：本质是一个变量存储右边的函数。（可无）
**lambda**：声明匿名函数的关键字。
**参数列表**：参数名1，参数名2，......
**冒号**：固定写法。
**返回值**：表达式的值就是返回值。
```
#用匿名函数计算两个数的和
my_sum = lambda x, y: x + y
print(my_sum(1,2))

3
```
##### 3、调用
匿名函数的调用和普通函数一样：函数名（实参）
```
#1、写一个匿名函数，获取指定数字列表，指定下标的值得1/2
x = lambda list1,index:list1[index]/2
print(x([1,2,3,4,5],3))

# 2、获取一个列表所有元素的和和平均值（sum函数可以计算一个序列的和）
x = lambda list2 : (sum(list2), sum(list2)/len(list2))
sum,average = x([1,2,3,4,5,6])
print(sum,average)
#或者这样取值
#print(x([1,2,3,4,5,6])[0])  
```
**函数的调用过程是一个压栈的过程：**
每次调用一个函数，系统就会在内存区域中的栈区间取开辟空间，保存函数调用产生的数据。当函数调用完成后，对应的栈区间会自动销毁。
函数调用时产生的栈区间中保存的数据有：形参、函数中声明变量
### 二、函数作用域
作用域：指的是一个变量能够使用的范围
##### 1、全局变量（global）
- 全局变量：就是声明在函数和类外面的变量都是全局变量。
- 全局变量作用域：从声明开始到文件结束。

##### 2、局部变量（local）
- 局部变量：声明在函数中或者类的变量就是局部变量。
- 局部变量的作用域：从声明开始到函数结束（类结束）。 
注意：函数的参数是声明在函数中的局部变量，同样不能在别的函数中使用。
```
# x, y, z都是局部变量
def func3(x, y):
  z = 'ab'
```
- 在局部区域内修改全局变量的值 --- global
```
c = 100
def func1():
    global c   #修改全局变量
    c = 200
func1()
print(c)
```
- 在局部的局部中修改局部变量 --- nonlocal
```
def func5():
    nn = 10
    def func6():
        nonlocal nn
        nn = 20
        print('func6',nn)
    func6()
    print('func5', nn)
func5()

func6 20
func5 20
```
### 三、递归函数
**递归函数**：在函数的函数体中调用函数本身，这样的函数就是递归函数。

**注意**：尽量不使用，递归函数反复调用函数，开辟空间，消耗内存。
##### 怎么写递归函数？
（1）、找临界值。（找到让循环结束的值/ 找到能够确定函数结果值）
（2）、假设函数的功能已经实现的前提下，找关系 f（n）和 f（n-1）/ 当次循环和上次循环的关系。
（3）、根据 f（n）和 f（n-1）的关系，来通过 f（n-1）实现 f（n）的效果。

练习：
```
#练习一
#1+2+3+...+100
def my_sum(n):
    #在临界值的位置一定要让函数结束
    if n == 1:
        return 1
    return my_sum(n-1) + n
print(my_sum(100))

结果：
5050

#练习二：计算斐波那契数列1,1,2,3,5,8...第n个数
def fib(n):
    if n == 1 or n == 2:
        return 1
    return fib(n-1) + fib(n-2)
print(fib(5))

结果：
5

#练习三：使用递归完成以下效果
n = 3
#***
#**
# *
def xxx(n):
    if n == 1 :
        print('*')
        return
    print('*'*n)
    xxx(n-1)
xxx(3)

结果：
***
**
*
```
思考一下程序结果和运行过程：
```
def func():
    a = []
    for i in range(5):
        a.append(lambda x:x*i)     #先把匿名函数存进去，没有计算返回值。
    return a     #返回func（）值时，开始计算列表内的数，此时 i = 4，所以列表内所有匿名函数 i值都为4
aa = func()
print(aa[0](2), aa[2](2), aa[3](2))

结果：
8 8 8
```
